<div class="card border-0 rounded shadow-sm p-3 m-5">
    <app-header-grid [ehAdministrador]="ehAdministrador" [rotaNovoRegistro]="rotaCadastro" (exportar)="exportarParaExcel()" (changeValueInput)="onChange($event)" ></app-header-grid>

  <ngx-table [data]="data" [pagination]="paginacao" [configuration]="configuracao" [columns]="colunas" [noResultsTemplate]="mensagemSemCadastro"
 [detailsTemplate]="detailsTemplate" #table>
    <ng-template let-row let-index="index">
      <td *ngIf="!isMobile">
        <div class="font-small">{{ row.codigoTipoEquipamento }}</div>
      </td>
      <td>
        <div class="font-small">{{ row.tipoEquipamento}}</div>
      </td>
      <td *ngIf="!isMobile">
        <div class="font-small">{{ row.nomeFabricante}}</div>
      </td>
      <td *ngIf="!isMobile">
        <div class="font-small">{{ row.nomeCategoria}}</div>
      </td>
      <td *ngIf="isMobile">
        <button class="btn botao-expandir" id="expandButton-{{ index }}" (click)="onRowClickEvent($event, index)">
          <i class="fa fa-arrow-left" *ngIf="!toggledRows.has(index)"></i>
          <i class="fa fa-arrow-down" *ngIf="toggledRows.has(index)"></i>
          Expandir
        </button>
      </td>
      <td *ngIf="!isMobile">
        <button title="Botão para editar registro" class="btn botao-alterar btn-lg" (click)="detalheEquipamento(row.codigoTipoEquipamento)">
          <i class="fa fa-edit"></i>
        </button>
      </td>
      <td *ngIf="!isMobile">
        <button title="Botão para excluir equipamento" class="btn botao-excluir btn-lg" (click)="abrirModal($event, template, row.codigoTipoEquipamento)">
          <i class="fa fa-trash"></i>
        </button>
      </td>

    </ng-template>
  </ngx-table>
  <div>
    <mat-paginator
        [length]="totalItensPaginacao"
        [pageSize]="5"
        (page)="paginationEvent($event)"
        [pageSizeOptions]="[5, 10, 25, 100]"
        [showFirstLastButtons]="true">
    </mat-paginator>
</div>
</div>
<ng-template #template>
  <div class="modal-body text-center">
    <p class="tamanho-fonte">Deseja confirmar a <strong>exclusão</strong> do equipamento de código {{equipamentoId}}?</p>
    <button type="button" class="btn btn-default" (click)="confirmar()">Sim</button>
    <button type="button" class="btn btn-primary" (click)="recusar()">Não</button>
  </div>
</ng-template>
<ng-template #mensagemSemCadastro>
  <td [attr.colspan]="colunas.length" class="no-results text-center">
    <h4>Não há nenhum equipamento cadastrado</h4>
  </td>
</ng-template>

<ng-template #detailsTemplate let-row>
  <p>Código: {{ row.codigoTipoEquipamento }}</p>
  <p>Fabricante: {{ row.nomeFabricante }}</p>
  <p>Categoria: {{ row.nomeCategoria }}</p>

  <button title="Botão para editar registro" class="btn botao-alterar btn-lg mr-3" (click)="detalheEquipamento(row.codigoTipoEquipamento)">
    <i class="fa fa-edit"></i>
  </button>
  <button title="Botão para excluir equipamento" class="btn botao-excluir btn-lg" (click)="abrirModal($event, template, row.codigoTipoEquipamento)">
    <i class="fa fa-trash"></i>
  </button>
</ng-template>
<ngx-spinner name="buscando" bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="#fff" type="square-jelly-box"
  [fullScreen]="true">
  <p style="color: white"> Buscando... </p>
</ngx-spinner>
<ngx-spinner name="excluindo" bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="#fff" type="square-jelly-box"
  [fullScreen]="true">
  <p style="color: white"> Excluindo... </p>
</ngx-spinner>
